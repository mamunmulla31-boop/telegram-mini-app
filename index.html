<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>Mini App - Adsterra Earn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Banner Ads / Smartlink can be included wherever needed -->
  <script type='text/javascript' src='https://www.profitablecpmrate.com/xxxyyy.js'></script>

  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }
    header { background: linear-gradient(45deg, #007bff, #00c6ff); color: white; padding: 15px; font-size: 22px; font-weight: bold; text-align: center; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
    .container { margin: 15px; }
    .card { background: white; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); text-align: center; transition: transform 0.2s ease; }
    .card:hover { transform: scale(1.01); }
    h3, h4 { margin: 10px 0; color: #333; }
    button { background: #007bff; color: white; border: none; padding: 12px 18px; border-radius: 10px; cursor: pointer; font-size: 16px; margin-top: 10px; box-shadow: 0 3px 6px rgba(0,0,0,0.2); }
    button:hover { background: #0056b3; }
    input, select { padding: 10px; width: 90%; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; }
    .admin { display: none; text-align: left; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    table, th, td { border: 1px solid #ddd; padding: 8px; font-size: 14px; }
    th { background: #f9f9f9; }
    footer { position: fixed; bottom: 0; width: 100%; background: white; text-align: center; padding: 10px; border-top: 1px solid #ddd; }
  </style>
</head>
<body>

<header>ðŸ’° Adsterra Mini App</header>

<div class="container">

  <!-- à¦†à¦œà¦•à§‡à¦° à¦¤à¦¾à¦°à¦¿à¦– -->
  <div class="card">
    <p>ðŸ“… à¦†à¦œà¦•à§‡à¦° à¦¤à¦¾à¦°à¦¿à¦–: <span id="today"></span></p>
  </div>

  <!-- Balance & Counter -->
  <div class="card">
    <h3>ðŸ’µ Balance: <span id="balance">0</span> à§³</h3>
    <p>ðŸ“Š à¦†à¦œà¦•à§‡ Ads à¦¦à§‡à¦–à¦¾ à¦¹à§Ÿà§‡à¦›à§‡: <span id="counter">0</span></p>
    <button onclick="startTask()">â–¶ Start Task (Show Ad)</button>

    <!-- Banner Ad -->
    <div style="margin-top:15px;">
      <h4>Sponsored</h4>
      <script type="text/javascript" src="https://www.profitablecpmrate.com/xxxyyy.js"></script>
    </div>
  </div>

  <!-- Withdraw -->
  <div class="card">
    <h3>ðŸ’³ Withdraw</h3>
    <select id="method">
      <option>Bkash</option>
      <option>Nagad</option>
    </select><br>
    <input type="text" id="number" placeholder="Enter Number"><br>
    <input type="number" id="amount" placeholder="Enter Amount"><br>
    <button onclick="withdraw()">Request Withdraw</button>

    <!-- Banner Ad -->
    <div style="margin-top:15px;">
      <h4>Sponsored</h4>
      <script type="text/javascript" src="https://www.profitablecpmrate.com/xxxyyy.js"></script>
    </div>
  </div>

  <!-- Admin Login -->
  <div class="card">
    <h3>ðŸ”‘ Admin Panel</h3>
    <input type="password" id="adminPass" placeholder="Enter Password">
    <button onclick="loginAdmin()">Login</button>
  </div>

  <!-- Admin Panel -->
  <div class="card admin" id="adminPanel">
    <h3>ðŸ“‹ Admin Dashboard</h3>
    <p>Allowed IP: <input type="text" id="allowedIp" value="0"> (0 = All)</p>
    <button onclick="updateIp()">Update IP Restriction</button>

    <p>ðŸ’° Points per Ad: <input type="number" id="adPoint" value="1" min="1"></p>
    <button onclick="updateAdPoint()">Update Points</button>

    <h4>ðŸ‘¥ Users List</h4>
    <table>
      <thead><tr><th>User</th><th>Ads Seen</th><th>Balance</th></tr></thead>
      <tbody id="userTable"></tbody>
    </table>

    <h4>ðŸ’³ Withdraw Requests</h4>
    <table>
      <thead><tr><th>User</th><th>Method</th><th>Number</th><th>Amount</th><th>Date</th></tr></thead>
      <tbody id="withdrawTable"></tbody>
    </table>
  </div>

</div>

<!-- Footer Banner Ad -->
<footer>
  <h4>Sponsored</h4>
  <script type="text/javascript" src="https://www.profitablecpmrate.com/xxxyyy.js"></script>
</footer>

<script>
let counter = parseInt(localStorage.getItem("counter") || 0);
let balance = parseInt(localStorage.getItem("balance") || 0);
let lastDate = localStorage.getItem("lastDate") || "";
let today = new Date().toLocaleDateString();
let adPoint = parseInt(localStorage.getItem("adPoint")) || 1;

document.getElementById("today").innerText = today;

// Daily reset
if(lastDate !== today){
  counter = 0;
  localStorage.setItem("lastDate", today);
}
document.getElementById("counter").innerText = counter;
document.getElementById("balance").innerText = balance;

// Start Task (Open Smartlink)
function startTask(){
  window.open("https://www.revenuecpmgate.com/wgtf4tqw6y?key=738aa4ec313bf3304ba27e7746425ba2","_blank");

  counter++;
  balance += adPoint;

  localStorage.setItem("counter", counter);
  localStorage.setItem("balance", balance);

  document.getElementById("counter").innerText = counter;
  document.getElementById("balance").innerText = balance;

  saveUser();
}

// Withdraw
function withdraw(){
  let method = document.getElementById("method").value;
  let number = document.getElementById("number").value;
  let amount = parseInt(document.getElementById("amount").value);

  if(amount <= 0 || amount > balance){
    alert("Invalid Amount!");
    return;
  }

  let uid = localStorage.getItem("uid") || ("user-" + Math.floor(Math.random()*10000));
  localStorage.setItem("uid", uid);

  let withdraws = JSON.parse(localStorage.getItem("withdraws") || "[]");
  withdraws.push({uid, method, number, amount, date: today});
  localStorage.setItem("withdraws", JSON.stringify(withdraws));

  alert("Withdraw Requested: " + method + " - " + number + " - " + amount + "à§³");
}

// Admin Login
function loginAdmin(){
  let pass = document.getElementById("adminPass").value;
  if(pass === "eatt7242888"){
    document.getElementById("adminPanel").style.display = "block";
    loadUsers();
    loadWithdraws();
    document.getElementById("adPoint").value = adPoint;
  } else alert("Wrong Password!");
}

// Save user
function saveUser(){
  let user = localStorage.getItem("uid") || ("user-" + Math.floor(Math.random()*10000));
  localStorage.setItem("uid", user);

  let users = JSON.parse(localStorage.getItem("users") || "{}");
  users[user] = { counter, balance };
  localStorage.setItem("users", JSON.stringify(users));
}

// Load Users
function loadUsers(){
  let users = JSON.parse(localStorage.getItem("users") || "{}");
  let table = document.getElementById("userTable");
  table.innerHTML = "";
  for(let u in users){
    table.innerHTML += `<tr><td>${u}</td><td>${users[u].counter}</td><td>${users[u].balance}</td></tr>`;
  }
}

// Load Withdraws
function loadWithdraws(){
  let withdraws = JSON.parse(localStorage.getItem("withdraws") || "[]");
  let table = document.getElementById("withdrawTable");
  table.innerHTML = "";
  withdraws.forEach(w => {
    table.innerHTML += `<tr><td>${w.uid}</td><td>${w.method}</td><td>${w.number}</td><td>${w.amount}</td><td>${w.date}</td></tr>`;
  });
}

// Update IP
function updateIp(){
  let ip = document.getElementById("allowedIp").value;
  localStorage.setItem("allowedIp", ip);
  alert("IP restriction updated (Demo only).");
}

// Update Points per Ad
function updateAdPoint(){
  let val = parseInt(document.getElementById("adPoint").value);
  if(val > 0){
    adPoint = val;
    localStorage.setItem("adPoint", adPoint);
    alert("Points per Ad updated to " + adPoint);
  } else alert("Invalid value!");
}
</script>

</body>
                          </html>
